{
  "__type__": "Config",
  "context": {
    "__type__": "Context",
    "customer": "taipingjinke",
    "project": "poc",
    "env": "development",
    "description": "这是为天健设置的生产部署的配置文件，包括文本信息读取",
    "mode": "docker",
    "os": "centos",
    "osVersion": "7.7",
    "dataPathRoot": "../project-tianjian/data_root",
    "imageOutputRootDir": "../project-tianjian/images"
  },
  "services": [
    {
      "__type__": "Service",
      "name": "postgres",
      "namespace": "identity",
      "imageCategory": "thirdparty",
      "srcImage": "postgres:11.5-alpine",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "identity_pg",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "5432:5432"
        ],
        "envs": [
          "POSTGRES_PASSWORD=\"Kt4C4TCHJ3\""
        ],
        "volumes": [
          "/postgres:/var/lib/postgresql/data"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "token_mt",
      "namespace": "identity",
      "imageCategory": "identity",
      "srcImage": "identity/token_mt:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "token_mt",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "5100:5100"
        ],
        "envs": [
          "SECRET_KEY=\"jd98u3oijmrf9u02p3kemf9q7uyrhfgnm4tuer9vcjkm34ijo\"",
          "SECRET_EXPIRED_DAYS=\"7\"",
          "SECRET_STATIC=\"true\""
        ],
        "volumes": [],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "identity_api",
      "namespace": "identity",
      "imageCategory": "identity",
      "srcImage": "identity/identity_api:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "identity_api",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "5200:5200"
        ],
        "envs": [
          "POSTGRES=\"postgres:Kt4C4TCHJ3@192.168.0.48:5432\"",
          "POSTGRES_IDENTITY=\"identity-management\"",
          "SERVICE_SECRET=\"http://192.168.0.48:5100/secret\""
        ],
        "volumes": [],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "homapage_ui",
      "namespace": "identity",
      "imageCategory": "identity",
      "srcImage": "identity/homepage_ui:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "homepage_ui",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "8082:8082"
        ],
        "envs": [
          "VUE_APP_HOMEPAGE_ROOT_URL=\"//192.168.0.48:8081\"",
          "VUE_APP_ACCOUNT_ROOT_URL=\"//192.168.0.48:8083\"",
          "VUE_APP_IDENTITY_HOST=\"//192.168.0.48:5200/v1\"",
          "VUE_APP_COOKIE_DOMAIN_NAME=\"\""
        ],
        "volumes": [],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "identity_ui",
      "namespace": "identity",
      "imageCategory": "identity",
      "srcImage": "identity/identity_ui:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "identity_ui",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "9100:9100"
        ],
        "envs": [
          "VUE_APP_HOMEPAGE_ROOT_URL=\"//192.168.0.48:8081\"",
          "VUE_APP_IDENTITY_HOST=\"//192.168.0.48:5200/v1\"",
          "VUE_APP_COOKIE_DOMAIN_NAME=\"\""
        ],
        "volumes": [],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "rabbitmq",
      "namespace": "expert",
      "imageCategory": "thirdparty",
      "srcImage": "rabbitmq:3.8-rc-management-alpine",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "rabbitmq",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "5672:5672",
          "4369:4369",
          "25672:25672"
        ],
        "envs": [],
        "volumes": [],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "labeling-ui",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/labeling_ui:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "labeling_ui",
        "restart": "always",
        "useHostNetwork": false,
        "ports": [
          "9102:8082"
        ],
        "envs": [
          "VUE_APP_HOMEPAGE_ROOT_URL=\"//192.168.0.48:8081\"",
          "VUE_APP_ACCOUNT_ROOT_URL=\"//192.168.0.48:8083\"",
          "VUE_APP_COOKIE_DOMAIN_NAME=\"\"",
          "VUE_APP_IDENTITY_API_HOST=\"//192.168.0.48:5200/v1\"",
          "VUE_APP_READER_API_HOST=\"//192.168.0.48:5001\"",
          "VUE_APP_OCR_API_ROOT_URL=\"\"",
          "VUE_APP_TENANT=\"minerva\"",
          "VUE_APP_PRIMARY_COLOR=\"\"",
          "VUE_APP_NAME=\"智能文本信息读取\"",
          "VUE_APP_FOOTER_TEXT=\"©2019 苏州美能华智能科技有限公司\""
        ],
        "volumes": [],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-cpu0",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-cpu0",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [],
        "envs": [
          "MT_CPU=\"1\"",
          "MT_INSTANCE_ID=\"mt.cpu.0\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-cpu1",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-cpu1",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [],
        "envs": [
          "MT_CPU=\"1\"",
          "MT_INSTANCE_ID=\"mt.cpu.1\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-cpu2",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-cpu2",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [],
        "envs": [
          "MT_CPU=\"1\"",
          "MT_INSTANCE_ID=\"mt.cpu.2\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-cpu3",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-cpu3",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [],
        "envs": [
          "MT_CPU=\"1\"",
          "MT_INSTANCE_ID=\"mt.cpu.3\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-gpu0",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-gpu0",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [],
        "envs": [
          "MT_GPU=\"0\"",
          "MT_INSTANCE_ID=\"mt.gpu0\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_TRAINABLE=\"\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-gpu1",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-gpu1",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [],
        "envs": [
          "MT_GPU=\"1\"",
          "MT_INSTANCE_ID=\"mt.gpu1\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_TRAINABLE=\"\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    },
    {
      "__type__": "Service",
      "name": "information-extraction-mt",
      "namespace": "expert",
      "imageCategory": "expert",
      "srcImage": "expert/information_extraction:latest",
      "docker": {
        "__type__": "ServiceDockerConfig",
        "containerName": "information-extraction-mt",
        "restart": "always",
        "useHostNetwork": false,
        "privileged": true,
        "ports": [
          "5001:5001"
        ],
        "envs": [
          "MT_HTTPS=\"0\"",
          "MT_INSTANCE_ID=\"mt.primary\"",
          "MT_MQHOST=\"192.168.0.48\"",
          "MT_PRIMARY=\"1\"",
          "MT_TRAINABLE=\"\"",
          "MT_MACHINE_ID=\"h3clHEGyRTp7FONMagzFxcEUtvdmDG+gYyZAPmXTgrxvfnGvkddukZG2AZ09zcDjQcCaX8dS8ayzFsP8YHnA/Icu08DHuhv7XvqKY+VE0fGQKInDoGL5OGn9r//I+RopiduFQwCdaNtQTOUldI9+dLxs4ti34NW2fdZ/Eh1nj1g=\""
        ],
        "volumes": [
          "/information-extraction/workspace:/app/package/data/workspace",
          "/information-extraction/session:/app/package/data/session"
        ],
        "command": ""
      }
    }
  ],
  "dbInitializers": [
    {
      "__type__": "DatabaseInitializer",
      "name": "identity-db-initalizer",
      "imageCategory": "identity",
      "srcImage": "identity/identity_db:latest",
      "useHostNetwork": false,
      "envs": [
        "POSTGRES_DB_IDENTITY_MANAGEMENT_HOST=192.168.0.48",
        "POSTGRES_DB_IDENTITY_MANAGEMENT_PORT=5432",
        "POSTGRES_DB_IDENTITY_MANAGEMENT_DATABASE=identity-management",
        "POSTGRES_DB_IDENTITY_MANAGEMENT_USERNAME=postgres",
        "POSTGRES_DB_IDENTITY_MANAGEMENT_PASSWORD=\"Kt4C4TCHJ3\"",
        "DB_EXECUTION_CONTEXT=demo"
      ]
    }
  ],
  "dockerContext": {
    "__type__": "DockerContext",
    "srcRegistryBase": "swr.cn-north-4.myhuaweicloud.com/meinenghua/"
  },
  "dbBackupAndRestoreContext": {
    "__type__": "DBBackupAndRestoreContext",
    "imageCategory": "thirdparty",
    "srcImage": "postgres:11.5-alpine",
    "databases": [
      {
        "__type__": "DatabaseInfo",
        "name": "identity-management",
        "server": "192.168.0.48",
        "port": "5432",
        "user": "postgres",
        "password": "Kt4C4TCHJ3",
        "diskDir": "/dbbackup/identity",
        "useHostNetwork": false
      }
    ]
  }
}